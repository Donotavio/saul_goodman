<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'none'; connect-src http://127.0.0.1:* http://localhost:*; img-src {cspSource} https: http: data:; style-src {cspSource} 'unsafe-inline'; script-src 'nonce-{nonce}' https://cdn.jsdelivr.net;"
    />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="{styleUri}" />
    <title>Saul Goodman VS Code Reports</title>
  </head>
  <body>
    <main class="report">
      <header class="report__header">
        <div class="header__content">
          <h1>Saul Goodman ¬∑ VS Code Reports</h1>
          <p id="reportStatus" class="report__status">Carregando dados do SaulDaemon...</p>
        </div>
        <div class="header__logo">
          <img src="{logoUri}" alt="Saul Goodman" class="logo" />
          <span class="logo-caption">Filial digital</span>
        </div>
      </header>

      <section id="reportsDisabled" class="card card--warning hidden">
        <h2 id="disabledTitle">Reports disabled</h2>
        <p id="disabledDetail">Enable "Enable Reports in VS Code" in settings to view the data.</p>
      </section>

      <section id="reportContent" class="hidden">
        <section class="card">
          <h2 id="filtersTitle">Filters</h2>
          <div class="filters">
            <label>
              <span id="labelProject">Project</span>
              <select id="filterProject">
                <option value="">All</option>
              </select>
            </label>
            <label>
              <span id="labelLanguage">Language</span>
              <select id="filterLanguage">
                <option value="">All</option>
              </select>
            </label>
            <label>
              <span id="labelMachine">Machine</span>
              <select id="filterMachine">
                <option value="">All</option>
              </select>
            </label>
            <div class="filters__actions">
              <button id="applyFilters">Apply</button>
              <button id="resetFilters" class="ghost">Clear</button>
            </div>
          </div>
        </section>

        <section class="stats-grid">
          <div class="card today-card">
            <div class="today-content">
              <div class="today-left">
                <h3 id="todayTitle">Today</h3>
                <div class="stat">
                  <span class="stat-value" id="statToday">--</span>
                </div>
              </div>
              <div class="index-badge">
                <span class="index-label">√çndice</span>
                <span class="index-value" id="indexValue">--</span>
              </div>
            </div>
          </div>
        </section>

        <section class="kpi-grid">
          <div class="kpi-card">
            <span class="kpi-label">FOCO ATIVO</span>
            <span class="kpi-value" id="kpiFocus">--</span>
          </div>
          <div class="kpi-card">
            <span class="kpi-label">TROCAS DE ABAS</span>
            <span class="kpi-value" id="kpiSwitches">--</span>
          </div>
          <div class="kpi-card kpi-card--productive">
            <span class="kpi-label">PRODUTIVO</span>
            <span class="kpi-value" id="kpiProductive">--</span>
          </div>
          <div class="kpi-card kpi-card--procrast">
            <span class="kpi-label">PROCRAST.</span>
            <span class="kpi-value" id="kpiProcrast">--</span>
          </div>
          <div class="kpi-card kpi-card--inactive">
            <span class="kpi-label">INATIVO</span>
            <span class="kpi-value" id="kpiInactive">--</span>
          </div>
        </section>

        <section class="grid-two">
          <div class="card">
            <h3 id="projectsTitle">Projects</h3>
            <ul id="projectsList" class="data-list"></ul>
          </div>
          <div class="card">
            <h3 id="languagesTitle">Languages</h3>
            <ul id="languagesList" class="data-list"></ul>
          </div>
        </section>

        <section class="card">
          <h3 id="summariesTitle">Summaries</h3>
          <ul id="summariesList" class="summary-list"></ul>
        </section>

        <section class="grid-two">
          <div class="card">
            <h3>Git Branches</h3>
            <ul id="branchesList" class="data-list"></ul>
          </div>
          <div class="card">
            <h3>Activity</h3>
            <ul id="activityList" class="data-list"></ul>
          </div>
        </section>

        <section class="card chart-section">
          <h3>Hourly Breakdown</h3>
          <p class="chart-subtitle">Activity distribution throughout the day</p>
          <div class="chart-container">
            <canvas id="hourlyChart" height="200"></canvas>
            <p id="hourlyEmpty" class="empty-state hidden">No hourly data to display yet.</p>
          </div>
        </section>

        <section class="grid-two charts-row">
          <div class="card chart-section">
            <h3>Time by Project</h3>
            <p class="chart-subtitle">How you distributed your time across projects</p>
            <div class="chart-container chart-container--small">
              <canvas id="projectsChart"></canvas>
              <p id="projectsEmpty" class="empty-state hidden">No project data to display.</p>
            </div>
          </div>
          <div class="card chart-section">
            <h3>Commit Activity</h3>
            <p class="chart-subtitle">When you committed code throughout the day</p>
            <div class="chart-container chart-container--small">
              <canvas id="commitsChart"></canvas>
              <p id="commitsEmpty" class="empty-state hidden">No commits recorded today.</p>
            </div>
          </div>
        </section>

        <section class="card chart-section">
          <h3>Languages √ó Projects</h3>
          <p class="chart-subtitle">Cross-reference: which languages you used in each project</p>
          <div class="chart-container chart-container--medium">
            <canvas id="crossReferenceChart"></canvas>
            <p id="crossReferenceEmpty" class="empty-state hidden">No data to cross-reference.</p>
          </div>
        </section>

        <section class="grid-two">
          <div class="card">
            <h3 id="workspacesTitle">Workspaces</h3>
            <ul id="workspacesList" class="data-list"></ul>
          </div>
          <div class="card">
            <h3 id="editorInfoTitle">Editor Info</h3>
            <div id="editorInfo"></div>
          </div>
        </section>

        <section id="telemetrySection" class="telemetry-section hidden">
          <div class="section-header">
            <h2>üìä Produtividade & Telemetria</h2>
            <p class="section-subtitle">M√©tricas detalhadas de desenvolvimento (100% local)</p>
          </div>

          <section class="telemetry-kpis">
            <div class="kpi-card kpi-card--telemetry">
              <span class="kpi-icon">üêõ</span>
              <span class="kpi-label">SESS√ïES DEBUG</span>
              <span class="kpi-value" id="telDebugSessions">--</span>
              <span class="kpi-detail" id="telDebugTime">--</span>
            </div>
            <div class="kpi-card kpi-card--telemetry">
              <span class="kpi-icon">‚úÖ</span>
              <span class="kpi-label">TAXA TESTES</span>
              <span class="kpi-value" id="telTestSuccess">--</span>
              <span class="kpi-detail" id="telTestRuns">--</span>
            </div>
            <div class="kpi-card kpi-card--telemetry">
              <span class="kpi-icon">üî®</span>
              <span class="kpi-label">BUILDS</span>
              <span class="kpi-value" id="telBuilds">--</span>
              <span class="kpi-detail" id="telBuildTime">--</span>
            </div>
            <div class="kpi-card kpi-card--telemetry">
              <span class="kpi-icon">üçÖ</span>
              <span class="kpi-label">POMODOROS</span>
              <span class="kpi-value" id="telPomodoros">--</span>
              <span class="kpi-detail" id="telFocusTime">--</span>
            </div>
          </section>

          <section class="grid-two charts-row">
            <div class="card chart-section">
              <h3>Comandos Terminal</h3>
              <p class="chart-subtitle">Categorias de comandos executados no terminal</p>
              <div class="chart-container chart-container--small">
                <canvas id="terminalCommandsChart"></canvas>
                <p id="terminalEmpty" class="empty-state hidden">Nenhum comando registrado.</p>
              </div>
            </div>
            <div class="card chart-section">
              <h3>Padr√µes de Foco</h3>
              <p class="chart-subtitle">Horas do dia com maior concentra√ß√£o</p>
              <div class="chart-container chart-container--small">
                <canvas id="focusPatternsChart"></canvas>
                <p id="focusEmpty" class="empty-state hidden">Sem dados de foco.</p>
              </div>
            </div>
          </section>

          <section class="grid-two">
            <div class="card">
              <h3>üîß Top Extens√µes Usadas</h3>
              <ul id="topExtensionsList" class="data-list"></ul>
            </div>
            <div class="card">
              <h3>üêõ Arquivos Mais Debugados</h3>
              <ul id="topDebuggedFilesList" class="data-list"></ul>
            </div>
          </section>

          <section class="grid-two">
            <div class="card">
              <h3>‚ö†Ô∏è Arquivos com Mais Erros</h3>
              <ul id="topErrorFilesList" class="data-list"></ul>
            </div>
            <div class="card">
              <h3>üìù Atividade de Refatora√ß√£o</h3>
              <div id="refactoringStats" class="stats-grid-mini"></div>
            </div>
          </section>
        </section>
      </section>
    </main>

    <button id="refreshButton" class="refresh-button" title="Atualizar dados">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
        <path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2"/>
      </svg>
    </button>

    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script nonce="{nonce}">window.__SAUL_CONFIG__ = {config};</script>
    <script nonce="{nonce}">window.__SAUL_I18N__ = {i18n};</script>
    <script nonce="{nonce}" src="{scriptUri}"></script>
  </body>
</html>
